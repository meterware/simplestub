<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.4 at 2014-01-12 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>SimpleStub - 
    SimpleStub: Overview</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20140112" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                    <div id="bannerLeft">
                SimpleStub
                </div>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                    
                <div class="xleft">
        <span id="publishDate">Last Published: 2014-01-12</span>
                  &nbsp;| <span id="projectVersion">Version: 0.9</span>
                      </div>
            <div class="xright">                    <a href="http://simplestub.java.net" class="externalLink" title="SimpleStub">SimpleStub</a>
              
                    
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                    
                                <h5>Description</h5>
                  <ul>
                  <li class="none">
            <strong>Overview</strong>
          </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                <li class="collapsed">
                          <a href="project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                                      <li class="collapsed">
                          <a href="project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                   
                    
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        


    <div class="section">
<h2>Overview<a name="Overview"></a></h2>
    
<p>Simplestub is a tool which simplifies the creation of test stubs for unit testing. It does so by filling in
    any unimlemented method at compile time. For example, the <tt>java.io.ObjectOutput</tt> interface has 17 methods
    in JDK 1.6, but in a test that only expects to write byte arrays, the following stub could be sufficient:</p>
    
        
<div class="source">
<pre>
        <b>import</b> com.meterware.simplestub.SimpleStub

        @SimpleStub
        <b>public abstract class</b> ObjectOutputStub <b>implements</b> ObjectOutput {

            <b>private</b> List&lt;<b>byte</b>[]&gt; bytes = <b>new</b> ArrayList&lt;<b>byte</b>[]&gt;
            <b>boolean</b> closed;

            <b>byte</b>[][] getWrittenBytes() { <b>return</b> b.toArray(<b>new byte</b>[][b.size()]); }
            <b>boolean</b> isClosed() { <b>return</b> closed; }

            <b>public void</b> write(<b>byte</b>[] b) { bytes.add(b); }
            <b>public void</b> close() { closed = true; }
        }</pre></div>
    

    The test class can be instantiated easily:
    
        
<div class="source">
<pre>
        <b>import</b> com.meterware.simplestub.Stub

        ObjectOutputStub objectOutput = Stub.create(ObjectOutputStub.<b>class</b>);</pre></div>
    

    
<p>Calls to the defined <tt>write</tt> method will be captured, and may be retrieved as the test progresses.
        Any call to one of the other methods will do nothing. Alternately, one can set the <tt>strict</tt> parameter
        of the annotation. If it is set, calls to the undefined methods will throw an exception, generated by SimpleStub.
        This can be useful when working to understand the calls made by legacy code.
    </p>

    
<p>
        The create call also takes any number of constructor parameters. SimpleStub will try to find a matching constructor
        defined on the annotation class, and call that.
    </p>


    </div>
<div class="section">
<h2>Rationale<a name="Rationale"></a></h2>
    
<p>Unit tests often involve stubbing out classes invoked by the System under Test (SUT). The common way to do
    that is simply to implement all of the abstract methods of an interface or abstract class. That can get
    cumbersome when there are a lot of them, especially if the test only needs a handful. IDEs can generate empty
    methods easily; however, that clutters up the test code - and any change to the interface requires updating
    all of the tests which have stubbed it out, even if the don't use those methods.</p>

    
<p>One approach to avoid this is to use one of the many Mock libraries, and simply define the behavior for
    the methods to be used; however, that is not strictly their purpose, and the setup code can be difficult to read
    and may need to be repeated with small variations from test to test.</p>

    
<p>SimpleStub takes a middle course. Developers define the behavior they want, and let the tool fill in the rest
    at compile time. The stub may then be used as usual.</p>

    </div>
<div class="section">
<h2>Historical Note<a name="Historical_Note"></a></h2>
    
<p>The initial implementation of this library, in the <tt>org.glassfish.simplestub</tt> package, relied
    on compile-time annotation processing to generate stub classes. This turned out to have an unfortunate interaction
    with certain IDEs. The current implementation, in the <tt>com.meterware.simplestub</tt> package, generates
    stubs at run time, using the <a class="externalLink" href="http://javassist.org">Javassist library</a></p>

</div>

      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                   2014.
          All Rights Reserved.      
                    
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>